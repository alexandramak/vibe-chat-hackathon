{"level":"info","message":"Socket.IO server running on port 3001","timestamp":"2025-05-31T15:23:31.721Z"}
{"level":"info","message":"HTTP server running on port 3000","timestamp":"2025-05-31T15:23:31.723Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:24:06.900Z"}
{"duration":35,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, password_hash, created_at FROM users WHERE username = $1","timestamp":"2025-05-31T15:24:06.920Z"}
{"duration":8,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO users (id, username, password_hash) VALUES ($1, $2, $3) RETURNING id, username, created_at","timestamp":"2025-05-31T15:24:06.973Z"}
{"level":"info","message":"Created new user: AlexMak","timestamp":"2025-05-31T15:24:06.973Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:07.035Z"}
{"duration":12,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T15:24:07.047Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:24:07.052Z"}
{"duration":12,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:07.054Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T15:24:07.055Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:20.857Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:20.861Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:20.957Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:20.958Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:22.511Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:24.245Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:26.309Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:26.614Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:26.771Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:26.927Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:31.549Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:33.734Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:33.734Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:33.888Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:33.889Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:35.945Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:37.728Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:37.729Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:38.009Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:38.010Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:38.199Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:38.199Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:38.557Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:38.558Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:38.687Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:24:38.688Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:44.782Z"}
{"duration":7,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        u.id,\n        u.username,\n        c.status,\n        c.created_at as connected_at\n       FROM contacts c\n       JOIN users u ON (c.contact_id = u.id)\n       WHERE c.user_id = $1\n       ORDER BY u.username","timestamp":"2025-05-31T15:24:44.790Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:24:44.802Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:44.803Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T15:24:44.804Z"}
{"duration":25,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:44.806Z"}
{"error":"invalid input syntax for type uuid: \"contacts\"","level":"error","message":"Database query error","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T15:24:44.812Z"}
{"code":"22P02","file":"uuid.c","length":140,"level":"error","line":"133","message":"Error getting chat messages: invalid input syntax for type uuid: \"contacts\"","name":"error","routine":"string_to_uuid","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","timestamp":"2025-05-31T15:24:44.813Z","where":"unnamed portal parameter $1 = '...'"}
{"level":"error","message":"Error: invalid input syntax for type uuid: \"contacts\"","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","statusCode":500,"timestamp":"2025-05-31T15:24:44.814Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:45.823Z"}
{"error":"invalid input syntax for type uuid: \"contacts\"","level":"error","message":"Database query error","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T15:24:45.825Z"}
{"code":"22P02","file":"uuid.c","length":140,"level":"error","line":"133","message":"Error getting chat messages: invalid input syntax for type uuid: \"contacts\"","name":"error","routine":"string_to_uuid","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","timestamp":"2025-05-31T15:24:45.825Z","where":"unnamed portal parameter $1 = '...'"}
{"level":"error","message":"Error: invalid input syntax for type uuid: \"contacts\"","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","statusCode":500,"timestamp":"2025-05-31T15:24:45.826Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:24:47.848Z"}
{"duration":10,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:47.850Z"}
{"error":"invalid input syntax for type uuid: \"contacts\"","level":"error","message":"Database query error","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T15:24:47.852Z"}
{"code":"22P02","file":"uuid.c","length":140,"level":"error","line":"133","message":"Error getting chat messages: invalid input syntax for type uuid: \"contacts\"","name":"error","routine":"string_to_uuid","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","timestamp":"2025-05-31T15:24:47.852Z","where":"unnamed portal parameter $1 = '...'"}
{"level":"error","message":"Error: invalid input syntax for type uuid: \"contacts\"","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","statusCode":500,"timestamp":"2025-05-31T15:24:47.853Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:24:51.869Z"}
{"duration":9,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:24:51.871Z"}
{"error":"invalid input syntax for type uuid: \"contacts\"","level":"error","message":"Database query error","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T15:24:51.874Z"}
{"code":"22P02","file":"uuid.c","length":140,"level":"error","line":"133","message":"Error getting chat messages: invalid input syntax for type uuid: \"contacts\"","name":"error","routine":"string_to_uuid","severity":"ERROR","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","timestamp":"2025-05-31T15:24:51.875Z","where":"unnamed portal parameter $1 = '...'"}
{"level":"error","message":"Error: invalid input syntax for type uuid: \"contacts\"","stack":"error: invalid input syntax for type uuid: \"contacts\"\n    at /app/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async query (/app/src/utils/db.js:30:17)\n    at async Object.getChatMessages (/app/src/services/messageService.js:56:20)\n    at async /app/src/routes/chatRoutes.js:43:20","statusCode":500,"timestamp":"2025-05-31T15:24:51.876Z"}
{"level":"info","message":"User disconnected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T15:24:55.742Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:28:43.518Z"}
{"duration":17,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:28:43.520Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T15:28:43.524Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:28:55.430Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T15:28:55.432Z"}
{"level":"info","message":"SIGTERM received. Shutting down gracefully...","timestamp":"2025-05-31T15:48:39.901Z"}
{"level":"info","message":"Socket.IO server running on port 3001","timestamp":"2025-05-31T15:48:41.771Z"}
{"level":"info","message":"HTTP server running on port 3000","timestamp":"2025-05-31T15:48:41.774Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:48:43.105Z"}
{"duration":36,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:48:43.125Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T15:48:43.127Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:54:16.126Z"}
{"duration":11,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, password_hash, created_at FROM users WHERE username = $1","timestamp":"2025-05-31T15:54:16.130Z"}
{"duration":6,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO users (id, username, password_hash) VALUES ($1, $2, $3) RETURNING id, username, created_at","timestamp":"2025-05-31T15:54:16.183Z"}
{"level":"info","message":"Created new user: testuser123","timestamp":"2025-05-31T15:54:16.183Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, password_hash, created_at FROM users WHERE username = $1","timestamp":"2025-05-31T15:54:26.292Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:56:04.965Z"}
{"duration":17,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:56:04.972Z"}
{"duration":9,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T15:56:04.982Z"}
{"level":"info","message":"User disconnected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T15:56:06.250Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:56:06.476Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T15:56:06.480Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:56:06.505Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T15:56:06.505Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:56:14.370Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:56:14.372Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:56:14.527Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T15:56:14.528Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:56:15.879Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:56:16.986Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T15:59:14.743Z"}
{"duration":18,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T15:59:14.747Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T15:59:14.753Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:18:22.935Z"}
{"duration":25,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:18:22.942Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:18:22.944Z"}
{"duration":16,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:18:22.946Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:18:22.947Z"}
{"duration":6,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:18:22.949Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:19:09.044Z"}
{"duration":12,"level":"debug","message":"Executed query","rows":0,"text":"SELECT id, username, password_hash, created_at FROM users WHERE username = $1","timestamp":"2025-05-31T16:19:09.047Z"}
{"duration":6,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO users (id, username, password_hash) VALUES ($1, $2, $3) RETURNING id, username, created_at","timestamp":"2025-05-31T16:19:09.098Z"}
{"level":"info","message":"Created new user: Penguin","timestamp":"2025-05-31T16:19:09.098Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:09.123Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:19:09.127Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:09.135Z"}
{"level":"info","message":"User connected: ac22529d-6e0d-4988-a20c-0a1e383040a9","timestamp":"2025-05-31T16:19:09.135Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:18.795Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T16:19:18.796Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:18.960Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T16:19:18.961Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:19.138Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T16:19:19.138Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:21.337Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:22.419Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:23.317Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:23.617Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:23.785Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:23.951Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:19:24.107Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:35:10.867Z"}
{"duration":21,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:35:10.872Z"}
{"duration":6,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:35:10.879Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:37:01.002Z"}
{"duration":16,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:37:01.007Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:37:01.013Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:37:02.721Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:37:02.723Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:38:08.343Z"}
{"duration":23,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:38:08.353Z"}
{"duration":10,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:38:08.364Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:38:10.271Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:38:10.273Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:38:12.248Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:38:12.251Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:38:13.826Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:40:13.656Z"}
{"duration":15,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:40:13.658Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:40:13.663Z"}
{"level":"info","message":"SIGTERM received. Shutting down gracefully...","timestamp":"2025-05-31T16:43:29.047Z"}
{"level":"info","message":"Socket.IO server running on port 3001","timestamp":"2025-05-31T16:44:06.913Z"}
{"level":"info","message":"HTTP server running on port 3000","timestamp":"2025-05-31T16:44:06.915Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:44:07.070Z"}
{"duration":45,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:44:07.086Z"}
{"level":"info","message":"User connected: ac22529d-6e0d-4988-a20c-0a1e383040a9","timestamp":"2025-05-31T16:44:07.087Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:44:11.039Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:44:11.039Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:44:12.038Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:44:12.039Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:45:04.028Z"}
{"duration":23,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:04.039Z"}
{"duration":20,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:45:04.061Z"}
{"level":"info","message":"User disconnected: ac22529d-6e0d-4988-a20c-0a1e383040a9","timestamp":"2025-05-31T16:45:04.068Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:13.905Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:45:13.911Z"}
{"level":"info","message":"User disconnected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:45:13.941Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:14.228Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:45:14.230Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:14.260Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:45:14.260Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:18.545Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T16:45:18.549Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:18.641Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE username ILIKE $1 LIMIT $2","timestamp":"2025-05-31T16:45:18.642Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:22.643Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":null,"text":"BEGIN","timestamp":"2025-05-31T16:45:22.647Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO chat_rooms (id, name, type, creator_id) VALUES ($1, $2, $3, $4) RETURNING *","timestamp":"2025-05-31T16:45:22.652Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO chat_participants (chat_room_id, user_id, role) VALUES ($1, $2, $3)","timestamp":"2025-05-31T16:45:22.653Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO chat_participants (chat_room_id, user_id, role) VALUES ($1, $2, $3)","timestamp":"2025-05-31T16:45:22.654Z"}
{"level":"info","message":"Created group chat: DataArt Hackathon","timestamp":"2025-05-31T16:45:22.654Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":null,"text":"COMMIT","timestamp":"2025-05-31T16:45:22.656Z"}
{"level":"debug","message":"Releasing database client","timestamp":"2025-05-31T16:45:22.657Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:22.666Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:45:22.697Z"}
{"duration":20,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:22.701Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:45:22.707Z"}
{"duration":14,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:22.710Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:45:22.710Z"}
{"duration":9,"level":"debug","message":"Executed query","rows":0,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:45:22.712Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:22.726Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:45:22.729Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:45:26.679Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:45:26.680Z"}
{"duration":11,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO messages \n       (chat_room_id, sender_id, content, content_type, media_url)\n       VALUES ($1, $2, $3, $4, $5)\n       RETURNING *","timestamp":"2025-05-31T16:45:26.691Z"}
{"duration":7,"level":"debug","message":"Executed query","rows":1,"text":"UPDATE chat_rooms SET updated_at = CURRENT_TIMESTAMP WHERE id = $1","timestamp":"2025-05-31T16:45:26.698Z"}
{"level":"debug","message":"Saved message in chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:45:26.698Z"}
{"level":"debug","message":"New message sent in chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:45:26.699Z"}
{"level":"info","message":"User disconnected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:45:36.270Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:36.475Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:45:36.475Z"}
{"level":"info","message":"User disconnected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:45:37.782Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:37.786Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:45:37.789Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:45:37.790Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:45:37.794Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:46:59.990Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:46:59.992Z"}
{"duration":17,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:46:59.994Z"}
{"duration":16,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:46:59.995Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:46:59.998Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:46:59.999Z"}
{"level":"info","message":"User disconnected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:47:01.149Z"}
{"level":"info","message":"User disconnected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:47:01.150Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:01.342Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:01.342Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:47:01.345Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:47:01.347Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:01.363Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:47:01.364Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:01.390Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:47:01.391Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:01.392Z"}
{"level":"info","message":"User connected: 91e5b17a-9d9a-437a-8a68-fc056c987da5","timestamp":"2025-05-31T16:47:01.393Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:47:03.728Z"}
{"level":"debug","message":"User 91e5b17a-9d9a-437a-8a68-fc056c987da5 joined chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:47:03.728Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:47:06.747Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:47:06.748Z"}
{"duration":8,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO messages \n       (chat_room_id, sender_id, content, content_type, media_url)\n       VALUES ($1, $2, $3, $4, $5)\n       RETURNING *","timestamp":"2025-05-31T16:47:06.757Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"UPDATE chat_rooms SET updated_at = CURRENT_TIMESTAMP WHERE id = $1","timestamp":"2025-05-31T16:47:06.761Z"}
{"level":"debug","message":"Saved message in chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:47:06.762Z"}
{"level":"debug","message":"New message sent in chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:47:06.763Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:17.092Z"}
{"duration":8,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:47:17.100Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:17.110Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:17.111Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":2,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:47:17.116Z"}
{"duration":7,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:47:17.119Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:18.593Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:47:18.595Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:18.602Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:18.603Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:47:18.604Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":2,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:47:18.605Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:20.240Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:47:20.241Z"}
{"duration":6,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:20.251Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:20.253Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":2,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:47:20.254Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:47:20.255Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:25.257Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:25.259Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:47:25.260Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":2,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:47:25.261Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:47:25.273Z"}
{"duration":19,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:47:25.275Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:47:25.278Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:48:43.948Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:48:43.949Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:48:43.950Z"}
{"duration":35,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:48:43.951Z"}
{"duration":38,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:48:43.952Z"}
{"duration":34,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:48:43.952Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:48:43.955Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":2,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:48:43.956Z"}
{"duration":6,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:48:43.958Z"}
{"duration":7,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, password_hash, created_at FROM users WHERE username = $1","timestamp":"2025-05-31T16:49:00.831Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:00.901Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:49:00.903Z"}
{"duration":0,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:00.927Z"}
{"level":"info","message":"User connected: ac22529d-6e0d-4988-a20c-0a1e383040a9","timestamp":"2025-05-31T16:49:00.928Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:49:02.703Z"}
{"level":"debug","message":"User ac22529d-6e0d-4988-a20c-0a1e383040a9 joined chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:49:02.704Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:02.707Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":2,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:49:02.709Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:02.719Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:49:02.720Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:02.734Z"}
{"level":"info","message":"User connected: ac22529d-6e0d-4988-a20c-0a1e383040a9","timestamp":"2025-05-31T16:49:02.734Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:49:11.476Z"}
{"duration":1,"level":"debug","message":"Executed query","rows":1,"text":"SELECT 1 FROM chat_participants WHERE chat_room_id = $1 AND user_id = $2","timestamp":"2025-05-31T16:49:11.477Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":1,"text":"INSERT INTO messages \n       (chat_room_id, sender_id, content, content_type, media_url)\n       VALUES ($1, $2, $3, $4, $5)\n       RETURNING *","timestamp":"2025-05-31T16:49:11.483Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"UPDATE chat_rooms SET updated_at = CURRENT_TIMESTAMP WHERE id = $1","timestamp":"2025-05-31T16:49:11.487Z"}
{"level":"debug","message":"Saved message in chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:49:11.487Z"}
{"level":"debug","message":"New message sent in chat 1e35fab8-af89-467b-b53c-8ff137712e46","timestamp":"2025-05-31T16:49:11.487Z"}
{"duration":7,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:23.607Z"}
{"duration":2,"level":"debug","message":"Executed query","rows":3,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:49:23.610Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:49:23.623Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:49:23.624Z"}
{"duration":23,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:23.626Z"}
{"duration":21,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:49:23.627Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:49:23.630Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:49:23.631Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:56:27.197Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:56:27.199Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:56:27.200Z"}
{"duration":23,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:56:27.200Z"}
{"duration":20,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:56:27.201Z"}
{"duration":22,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:56:27.202Z"}
{"duration":4,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:56:27.204Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:56:27.205Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":3,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:56:27.207Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:58:34.199Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:58:34.201Z"}
{"level":"info","message":"Connected to PostgreSQL database","timestamp":"2025-05-31T16:58:34.201Z"}
{"duration":26,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:58:34.202Z"}
{"duration":26,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:58:34.203Z"}
{"duration":25,"level":"debug","message":"Executed query","rows":1,"text":"SELECT id, username, created_at FROM users WHERE id = $1","timestamp":"2025-05-31T16:58:34.204Z"}
{"duration":3,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id = $1\n       GROUP BY cr.id","timestamp":"2025-05-31T16:58:34.207Z"}
{"duration":5,"level":"debug","message":"Executed query","rows":3,"text":"SELECT \n        m.*,\n        json_build_object(\n          'id', u.id,\n          'username', u.username\n        ) as sender,\n        COALESCE(\n          json_agg(\n            json_build_object(\n              'user_id', mr.user_id,\n              'reaction', mr.reaction\n            )\n          ) FILTER (WHERE mr.message_id IS NOT NULL),\n          '[]'\n        ) as reactions\n       FROM messages m\n       JOIN users u ON m.sender_id = u.id\n       LEFT JOIN message_reactions mr ON m.id = mr.message_id\n       WHERE m.chat_room_id = $1\n       GROUP BY m.id, u.id\n       ORDER BY m.created_at DESC\n       LIMIT $2 OFFSET $3","timestamp":"2025-05-31T16:58:34.208Z"}
{"duration":6,"level":"debug","message":"Executed query","rows":1,"text":"SELECT \n        cr.*,\n        json_agg(json_build_object(\n          'id', u.id,\n          'username', u.username,\n          'role', cp.role\n        )) as participants\n       FROM chat_rooms cr\n       JOIN chat_participants cp ON cr.id = cp.chat_room_id\n       JOIN users u ON cp.user_id = u.id\n       WHERE cr.id IN (\n         SELECT chat_room_id \n         FROM chat_participants \n         WHERE user_id = $1\n       )\n       GROUP BY cr.id\n       ORDER BY cr.updated_at DESC","timestamp":"2025-05-31T16:58:34.209Z"}
